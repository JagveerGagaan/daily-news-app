{"ast":null,"code":"import _asyncToGenerator from\"/home/jagveergagaan/MY_DATA/CODE_PLAYGROUND/React_Work/news-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/jagveergagaan/MY_DATA/CODE_PLAYGROUND/React_Work/news-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/jagveergagaan/MY_DATA/CODE_PLAYGROUND/React_Work/news-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import NewsItem from'./NewsItem';import Spinner from'./Spinner';import InfiniteScroll from'react-infinite-scroll-component';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var News=function News(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],setTotalResults=_useState8[1];var capitalFirstLetter=function capitalFirstLetter(string){return string.slice(0,1).toUpperCase()+string.slice(1,string.length).toLowerCase();};var updateNews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.setProgress(5);props.setProgress(15);setLoading(true);setPage(page+1);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apikey,\"&page=\").concat(page,\"&pageSize=\").concat(props.pageSize);props.setProgress(25);props.setProgress(35);props.setProgress(45);props.setProgress(55);_context.next=11;return fetch(url);case 11:data=_context.sent;props.setProgress(65);props.setProgress(75);_context.next=16;return data.json();case 16:parsedData=_context.sent;props.setProgress(85);props.setProgress(95);setArticles(parsedData.articles);setTotalResults(parsedData.totalResults);setLoading(false);props.setProgress(100);case 23:case\"end\":return _context.stop();}}},_callee);}));return function updateNews(){return _ref.apply(this,arguments);};}();useEffect(function(){document.title=\"\".concat(capitalFirstLetter(props.category),\" - NewsApp\");updateNews();},[]);// const handlePrevClick = async () => {\n//   setPage(page-1);\n//   updateNews();\n// };\n// const handleNextClick = async () => {\n//   setPage(page+1);\n//   updateNews();\n// };\nvar fetchMoreData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apikey,\"&page=\").concat(page,\"&pageSize=\").concat(props.pageSize);setPage(page+1);setLoading(true);_context2.next=5;return fetch(url);case 5:data=_context2.sent;_context2.next=8;return data.json();case 8:parsedData=_context2.sent;setArticles(articles.concat(parsedData.articles));setTotalResults(parsedData.totalResults);setLoading(false);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchMoreData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{margin:'65px 0px 30px 0px'},children:[\"NewsApp - Top \",capitalFirstLetter(props.category),\" Headlines\"]}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles.length,next:fetchMoreData,hasMore:articles.length!==totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles.map(function(myElement){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItem,{title:myElement.title,description:myElement.description?myElement.description:'',imageUrl:myElement.urlToImage?myElement.urlToImage:'https://ichef.bbci.co.uk/news/1024/branded_news/6D88/production/_122504082_mediaitem122504081.jpg',newsUrl:myElement.url,author:myElement.author?myElement.author:'Unknown',articlesDate:myElement.publishedAt,source:myElement.source.name})},myElement.url);})})})})]});};News.defaultProps={country:'in',pageSize:6};export default News;","map":{"version":3,"sources":["/home/jagveergagaan/MY_DATA/CODE_PLAYGROUND/React_Work/news-app/src/Components/News.js"],"names":["React","useEffect","useState","NewsItem","Spinner","InfiniteScroll","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalResults","capitalFirstLetter","string","slice","toUpperCase","length","toLowerCase","updateNews","setProgress","url","country","category","apikey","pageSize","fetch","data","json","parsedData","document","title","fetchMoreData","concat","margin","map","myElement","description","urlToImage","author","publishedAt","source","name","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport NewsItem from './NewsItem';\nimport Spinner from './Spinner';\nimport PropTypes from 'prop-types';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\nconst News = (props) => {\n  const [articles, setArticles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [totalResults, setTotalResults] = useState(0);\n\n  const capitalFirstLetter = (string) => {\n    return (\n      string.slice(0, 1).toUpperCase() +\n      string.slice(1, string.length).toLowerCase()\n    );\n  };\n\n  const updateNews = async () => {\n    props.setProgress(5);\n    props.setProgress(15);\n\n    setLoading(true);\n    setPage(page + 1);\n\n    let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apikey}&page=${page}&pageSize=${props.pageSize}`;\n    props.setProgress(25);\n    props.setProgress(35);\n\n    props.setProgress(45);\n    props.setProgress(55);\n\n    let data = await fetch(url);\n    props.setProgress(65);\n    props.setProgress(75);\n\n    let parsedData = await data.json();\n    props.setProgress(85);\n    props.setProgress(95);\n\n    setArticles(parsedData.articles);\n    setTotalResults(parsedData.totalResults);\n    setLoading(false);\n    props.setProgress(100);\n  };\n\n  useEffect(() => {\n    document.title = `${capitalFirstLetter(props.category)} - NewsApp`;\n    updateNews();\n  }, []);\n\n  // const handlePrevClick = async () => {\n  //   setPage(page-1);\n  //   updateNews();\n  // };\n\n  // const handleNextClick = async () => {\n  //   setPage(page+1);\n  //   updateNews();\n\n  // };\n\n  const fetchMoreData = async () => {\n    const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apikey}&page=${page}&pageSize=${props.pageSize}`;\n    setPage(page + 1);\n    setLoading(true);\n\n    let data = await fetch(url);\n    let parsedData = await data.json();\n\n    setArticles(articles.concat(parsedData.articles));\n    setTotalResults(parsedData.totalResults);\n    setLoading(false);\n  };\n\n  return (\n    <>\n      <h1 className='text-center' style={{ margin: '65px 0px 30px 0px' }}>\n        NewsApp - Top {capitalFirstLetter(props.category)} Headlines\n      </h1>\n      {/* {loading && <Spinner />} */}\n      <InfiniteScroll\n        dataLength={articles.length}\n        next={fetchMoreData}\n        hasMore={articles.length !== totalResults}\n        loader={<Spinner />}>\n        <div className='container'>\n          <div className='row'>\n            {articles.map((myElement) => {\n              return (\n                <div className='col-md-4' key={myElement.url}>\n                  <NewsItem\n                    title={myElement.title}\n                    description={\n                      myElement.description ? myElement.description : ''\n                    }\n                    imageUrl={\n                      myElement.urlToImage\n                        ? myElement.urlToImage\n                        : 'https://ichef.bbci.co.uk/news/1024/branded_news/6D88/production/_122504082_mediaitem122504081.jpg'\n                    }\n                    newsUrl={myElement.url}\n                    author={myElement.author ? myElement.author : 'Unknown'}\n                    articlesDate={myElement.publishedAt}\n                    source={myElement.source.name}\n                  />\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </InfiniteScroll>\n    </>\n  );\n};\n\nNews.defaultProps = {\n  country: 'in',\n  pageSize: 6,\n};\n\nNews.propTypes = {\n  country: PropTypes.string,\n  pageSize: PropTypes.number,\n  category: PropTypes.string,\n};\n\nexport default News;\n"]},"metadata":{},"sourceType":"module"}